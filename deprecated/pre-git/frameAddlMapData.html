<html>

<head>

	<link rel="stylesheet" type="text/css" href="frameStyles.css">
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="jquery.flot.js"></script>
	<script src="jquery.flot.pie.js"></script>
	<script src="jquery.flot.resize.js"></script>
	<script>
		window.addEventListener("load", initCharts, false);
		window.addEventListener("resize", function() { 	$("continentPie").resize(); }, true);

		var datasets = {
			"NA": {
				label: "North America",
				data: 0.0001,
				color: "rgb(255,165,0)"
			},
			"EU": {
				label: "Europe",
				data: 0.0001,
				color: "rgb(255,0,0)"
			},
			"SA": {
				label: "South America",
				data: 0.0001,
				color: "rgb(255,140,0)"
			},
			"AF": {
				label: "Africa",
				data: 0.0001
			},
			"AS": {
				label: "Asia",
				data: 0.0001
			},
			"OC": {
				label: "Oceania",
				data: 0.0001
			}
		};

		function initCharts() {
			// hard-code color indices to prevent them from shifting as continents are turned on/off
			// var i = 0;
			// $.each(datasets, function(key, val) {
			// 	val.color = i;
			// 	++i;
			// });

			// insert checkboxes
			$.each(datasets, function(key, val) {
				$("#choices").append("<br/><input type='checkbox' name='" + key +
					"' checked='checked' id='id" + key + "'></input>" +
					"<label for='id" + key + "'>"
					+ val.label + "</label> <b><span id=''></span></b>");
			});
			$("#choices").find("input").click(plotAccordingToChoices);		

			plotAccordingToChoices();
		}

		function plotAccordingToChoices() {
			var data = [];
			$("#choices").find("input:checked").each(function () {
				var key = $(this).attr("name");
				if (key && datasets[key]) {
				data.push(datasets[key]);
				}
			});
			
			if (data.length > 0) {
				$.plot('#continentPie', data, {
				    series: {
				        pie: {
				            show: true,
				            radius: 0.9,
				            label: {
				            	show: false
				            },
				            stroke: {
				            	color: '#000',
				            	width: 3,
				            }
				        }
				    },
				    legend: {
				    	show: false
				    }
				});	
			}
		}

		function incrementDataset(continent) {
			datasets[continent].data++;
		}

	</script>

</head>

<body>
	<table id="addlDataTable">
		<tr>
			<td width="50%">
			</td>
			<td width="35%">
				<div id="continentPie" style="width:100%;height:100%"></div>
			</td>
			<td width="15%">
				<div id="choices" style="width=100%"></div>
			</td>
	</table>
</body>

</html>